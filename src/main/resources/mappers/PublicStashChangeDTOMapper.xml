<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.5.10//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.PhamKornbluhGroup.mybatismysqlimpl.IPublicStashChangeDTO">

    <resultMap id="PublicStashChangeDTOMap" type="com.PhamKornbluhGroup.DTO.PublicStashChangeDTO" autoMapping="false">
        <id property="dbId" column="dbId"/>
        <result property="resultId" column="resultId"/>
        <result property="id" column="id"/>
        <result property="isPublic" column="isPublic"/>
        <result property="accountName" column="accountName"/>
        <result property="stash" column="stash"/>
        <result property="stashType" column="stashType"/>
        <result property="league" column="league"/>
        <collection property="items" column="dbId" javaType="ArrayList"
                    ofType="com.PhamKornbluhGroup.DTO.PublicStashChangeDTO"
                    select="com.PhamKornbluhGroup.mybatismysqlimpl.IItemDTO.getEntityByPublicStashChangeId"/>
    </resultMap>

    <select id="getEntityById" resultMap="PublicStashChangeDTOMap">
        <![CDATA[
        SELECT
            dbId,
            resultId,
            id,
            isPublic,
            accountName,
            stash,
            stashType,
            league
        FROM PublicStashChange
        WHERE PublicStashChange.dbId = #{dbId}
		]]>
    </select>

    <select id="getEntityByResultId" resultMap="PublicStashChangeDTOMap">
        <![CDATA[
        SELECT
            dbId,
            resultId,
            id,
            isPublic,
            accountName,
            stash,
            stashType,
            league
        FROM PublicStashChange
        WHERE PublicStashChange.resultId = #{dbId}
		]]>
    </select>

    <insert id="saveEntity" useGeneratedKeys="true" keyProperty="dbId">
        <![CDATA[
			INSERT INTO PublicStashChange
			    (resultId, id, isPublic, accountName, stash, stashType, league)
			VALUES
			    (#{resultId}, #{id}, #{isPublic}, #{accountName}, #{stash}, #{stashType}, #{league})
		]]>
    </insert>

    <update id="updateEntity">
        <![CDATA[
			UPDATE PublicStashChange
			SET resultId = #{resultId},
			    id = #{id},
			    isPublic = #{isPublic},
			    accountName = #{accountName},
			    stash = #{stash},
			    stashType = #{stashType},
			    league = #{league}
			WHERE dbId = #{dbId}
		]]>
    </update>

    <delete id="removeEntity">
        <![CDATA[
			DELETE FROM PublicStashChange
			WHERE dbId = #{dbId}
		]]>
    </delete>

</mapper>